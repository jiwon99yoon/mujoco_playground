<!-- mjx_single_moving_ball_with_ramp.xml -->
<mujoco model="panda single moving ball with ramp">
  <include file="mjx_scene.xml"/>
  
  <worldbody>
    <!-- 경사면 (Ramp) 추가 - 15도 경사면 -->
    <body name="ramp" pos="0.9 0 0.25" quat="0.9659 0 -0.2588 0">
      <!-- 15도 경사면: 전체 body를 15도 회전시켜서 로컬 좌표계 사용 -->
      <geom name="ramp_surface" type="box" size="0.7 0.2 0.01"
            rgba="0.7 0.5 0.3 1" friction="0.6 0.005 0.0001"
            contype="1" conaffinity="1"/>
      
      <!-- 경사면 옆 벽 (로컬 좌표계에서 Y축 방향) -->
      <geom name="ramp_wall_left" type="box" size="0.7 0.01 0.08" 
            pos="0 0.21 0.06"
            rgba="0.6 0.4 0.2 1" contype="1" conaffinity="1"/>
      <geom name="ramp_wall_right" type="box" size="0.7 0.01 0.08" 
            pos="0 -0.21 0.06"
            rgba="0.6 0.4 0.2 1" contype="1" conaffinity="1"/>
      
      <!-- 경사면 상단 벽 (로컬 좌표계에서 X축 끝) -->
      <geom name="ramp_wall_top" type="box" size="0.01 0.2 0.12" 
            pos="0.7 0 0.06"
            rgba="0.6 0.4 0.2 1" contype="1" conaffinity="1"/>
    
      <!-- 경사면 하단 벽 (로컬 좌표계에서 -X축 끝) -->
      <!--
      <geom name="ramp_wall_bottom" type="box" size="0.01 0.2 0.08" 
            pos="-0.7 0 0.04"
            rgba="0.6 0.4 0.2 0.8" contype="1" conaffinity="1"/>-->
    </body>
    
    <!-- 공 (Ball) - 경사면 상단에서 시작 -->
    <!-- 15도 경사면 상단 위치 계산: -->
    <!-- 중심 (0.9, 0, 0.25) + 상단 오프셋 (0.6761, 0, 0.1812) + 공 반지름 여유 -->
    <body name="ball" pos="1.55 0 0.46">
      <freejoint/>
      <geom type="sphere" name="ball" size="0.025" condim="3"
            mass="0.05"
            friction="0.5 0.1 0.001" 
            rgba="0 1 0 1" 
            contype="2" conaffinity="1" 
            solref="0.02 1"/>
    </body>
    
    <!-- 목표 위치 표시 (빨간색 반투명 구) -->
    <body mocap="true" name="mocap_target">
      <geom type="sphere" size="0.025" rgba="1 0 0 0.4" contype="0" conaffinity="0"/>
    </body>
  </worldbody>
  
  <keyframe>
    <!-- 로봇 홈 포지션 - 공을 잡기 좋은 위치로 조정 -->
    <key name="home"
      qpos="0 0.3 0 -1.57079 0 2.0 -0.7853 0.04 0.04 1.55 0 0.46 1 0 0 0"
      ctrl="0 0.3 0 -1.57079 0 2.0 -0.7853 0.04"/>
  </keyframe>
</mujoco>